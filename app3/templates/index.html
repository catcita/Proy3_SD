{% extends "base.html" %}
{% block title %}Eventos Disponibles{% endblock %}

{% block content %}
    <div class="header">
        <h1>Eventos Disponibles</h1>
    </div>

    <div id="global-message"></div>

    {% if error_message %}
        <div class="error-box">
            <strong>Error:</strong> {{ error_message }}
        </div>
    {% elif events %}
        <div class="event-grid">
            {% for event in events %}
            <div class="event-card">
                <div class="event-card-content">
                    <h2>{{ event.name }}</h2>
                    <p>{{ event.description }}</p>
                    <p class="venue">Lugar: {{ event.venue }}</p>
                    <p>Fecha: {{ event.date }}</p>
                    <p class="seats">Asientos Disponibles: {{ event.available_seats }}</p>
                </div>
                <div class="event-card-footer">
                    <button class="buy-button" onclick="verAsientos('{{ event.id }}')">Ver Asientos</button>
                </div>
            </div>
            {% endfor %}
        </div>
    {% else %}
        <div class="info-box">
            <p>No hay eventos disponibles en este momento.</p>
        </div>
    {% endif %}

    <script>
        function verAsientos(eventId) {
            window.location.href = `/evento/${eventId}/asientos`;
        }
    </script>
{% endblock %}